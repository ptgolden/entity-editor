<!doctype html>
<html>
  <head>
    <title>Entity identifier editor</title>

    <style type="text/css">
      body {
          margin-left: 1.5in;
      }

      #editor, #editor-source {
          display: inline-block;
          vertical-align: top;
          width: 400px;
          border: 1px solid #444;
          height: 400px;
          padding: 12px;
      }

      #editor {
          margin-right: 2em;
      }

      .ee-entity {
          color: black;
          text-decoration: none;
          background: #d2d2ff;
      }
    </style>

  </head>
  <body>
    <h1>Entity identifier editor</h1>
    <main>
      <div id="editor" contenteditable="true" designmode="on">Click to edit</div>
      <div id="editor-source">
      </div>
    </main>

    <script type="text/javascript" src="./lib/zepto.js"></script>
    <script type="text/javascript" src="./lib/rangy-1.2.3/rangy-core.js"></script>
    <script type="text/javascript" src="./entity-editor.js"></script>
    <script type="text/javascript">
      var el = document.getElementById('editor')
        , editor = new EntityEditor(el)
        , $src = $('#editor-source')

      function updateSource() {
        setTimeout(function () { $src.text(editor.getValue()) }, 0, this);
      }

      editor.$el.on('ee:input', updateSource);
      updateSource();
    </script>

  </body>
</html>
